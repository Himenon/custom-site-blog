<html><head lang="js"><title>カスタムコンポーネント機能の実装</title><meta charSet="utf-8"/><meta name="keywords" content="静的サイトジェネレーター,NodeJS,React,generator"/><meta name="description" content="自作の静的サイトジェネレーターの技術ブログです。開発中の技術ノウハウや、考えを書く予定です。"/><meta name="copyright" content="@Himenon"/><meta name="viewport" content="initial-scale=1,minimum-scale=0.5,user-scalable=no"/><script src="/custom-site-blog/assets/js/respond.js"></script><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script><link href="/custom-site-blog/assets/stylesheets/styles.css" rel="stylesheet"/><link href="/custom-site-blog/assets/stylesheets/pygment_trac.css" rel="stylesheet"/></head><body><div id="header"><div class="wrapper"><a href="/custom-site-blog" class="btn">静的サイトジェネレーター開発日誌</a><ul class="nav"><li class="downloads"><a href="https://github.com/Himenon/custom-site" class="btn">Github</a></li></ul></div></div><div class="wrapper"><section><h1>カスタムコンポーネント機能の実装</h1><div><p>PR22で追加しました。</p><ul><li><a href="https://github.com/Himenon/custom-site/pull/22">https://github.com/Himenon/custom-site/pull/22</a></li></ul><p>今回の新機能</p><ol><li>コンポーネント単位のカスタムが可能になりました。</li></ol><h2>実装の話</h2><p>実は<a href="/custom-site-blog/article/custom-template-system">前回</a>の使い回しなので、ほとんど書くことが無いんですよね〜。</p><p>CLIからカスタムコンポーネントのファイルを指定して、vmで実行。
その返り値を<code>&lt;MDXTag&gt;</code>に渡すだけでおしまい。</p><p>型の紹介でもしておきましょう。<a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/react/index.d.ts#L2678-L2853">@types/react</a>で定義されている
<code>JSX.IntrinsicElements</code>を使えばカスタム可能なコンポーネントの一覧を得ることができます。
それを今回ほしい型に整形して定義しておきます。</p><pre><code class="language-ts">export type CustomComponents = { [P in keyof JSX.IntrinsicElements]?: (props: JSX.IntrinsicElements[P]) =&gt; React.ReactNode };
</code></pre><p>これを利用することにより、圧倒的に開発が楽になります！</p><h2>関連記事</h2><ul><li><a href="/custom-site-blog/article/change-package-name-to-custom-site">次の記事: パッケージ名を変更しました</a></li><li><a href="/custom-site-blog/article/custom-template-system">前の記事: カスタムテンプレート機能の実装</a></li></ul></div></section></div></body></html>