---
title: プラグイン機構を考える
---

Twitterカードを用意しようと思ったら、記事ごとに`<meta>`を用意する必要がある。
実装は簡単で、CustomComponentやCustomThemeと同じように作っていけばよいのだけれど、統一性が無いことがわかる。

CustomComponetやCustomThemeもプラグインとして扱うことで、実装方式を統一して、ライブラリの外側から実装したい場合に耐えられるアーキテクチャを目指す。

## プラグイン関連の資料を探す

* https://www.gatsbyjs.org/docs/plugins/
* https://jekyllrb.com/docs/plugins/
* https://www.mkdocs.org/user-guide/plugins/
* https://vuepress.vuejs.org/plugin/
* https://webpack.js.org/concepts/plugins/
* https://rollupjs.org/guide/en#plugins
* https://nuxtjs.org/guide/plugins

### 実装

* https://github.com/Microsoft/typescript-tslint-plugin

#### nuxt.jsの場合

https://github.com/nuxt/nuxt.js/blob/36ca945d004acf049b8110ca196448b03e7ca7a8/packages/builder/src/builder.js#L135-L163


#### mkdocsの場合

https://github.com/mkdocs/mkdocs/blob/f4d0b52e8cb86b84708a941b230a5029f4a5d657/mkdocs/plugins.py#L27-L32

* [setuptoolsを使ったpluginサンプル egg編 — 清水川Web](http://www.freia.jp/taka/docs/pyhack4/setuptools/setuptools-plugin2.html)
* [Python: setuptools のプラグイン機構 pkg\_resources を使ってみる \| CUBE SUGAR STORAGE](http://momijiame.tumblr.com/post/82484166907/python-setuptools-%E3%81%AE%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E6%A9%9F%E6%A7%8B-pkgresources-%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B)

#### gatsbyの場合

[Gatsby Node APIs](https://www.gatsbyjs.org/docs/node-apis/)から探索していくと、実装箇所が容易に見つけられた。

* https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby/src/internal-plugins

### まとまっているもの

* https://github.com/azu/JavaScript-Plugin-Architecture
* https://qiita.com/Quramy/items/1fc9aee235b79236775c

## Middleware

* http://expressjs.com/en/guide/using-middleware.html


